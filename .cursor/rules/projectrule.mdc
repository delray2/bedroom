---
description: 

"
## Smart Home Dashboard Codebase Architecture Overview

This is a comprehensive Electron-based smart home dashboard for Hubitat integration, designed for a 7-inch Raspberry Pi touchscreen in portrait mode.

### **ARCHITECTURE:**
- **Backend**: Electron main process (main.js) with Express server (port 4711) and WebSocket server (port 4712)
- **Frontend**: Single-page web app with modular JavaScript architecture
- **Communication**: Real-time WebSocket updates from Hubitat via webhooks
- **API Integration**: Hubitat Maker API (local IP 192.168.4.44) with access tokens

### **CORE COMPONENTS:**
- **Main UI**: Wall switch panel with two paddle switches (Lights/All) and side button toolbar
- **Modal System**: Activity-based timeout system with smooth animations from trigger buttons
- **State Management**: Centralized DeviceStateManager for real-time device state tracking
- **Device Control**: Individual device modals with slider carousels for fine control

### **DEVICE TYPES SUPPORTED:**
- **Lights**: LIFX bulbs (447, 450, 451, 480) with color/brightness/temperature control
- **Groups**: Bedroom Lights group (457) for coordinated control
- **TVs**: Roku TV (473, 474) and Fire TV via Home Assistant integration
- **Security**: August lock (509) with status indicator
- **Climate**: Google Nest thermostat (86) with circular dial interface
- **Other**: Rollershades (531), camera streaming, virtual switches

### **KEY FEATURES:**
- **Scenes**: Predefined lighting scenes (Focusing, Evening, Calm, etc.) with LIFX Beam integration
- **Real-time Updates**: WebSocket communication for instant state synchronization
- **Touch Optimized**: Large buttons, gesture controls, haptic feedback simulation
- **Camera Integration**: Live Reolink camera streaming with WebRTC/HLS/MJPEG fallback
- **Theme Support**: Dark/light theme toggle with CSS custom properties

### **FILE STRUCTURE:**
- **main.js**: Electron backend with webhook endpoints and WebSocket broadcasting
- **scripts/main.js**: Frontend initialization, device constants, paddle switch logic
- **scripts/ui-manager.js**: Central UI controller with modal management
- **scripts/modal.js**: Modal system with activity monitoring and timeout management
- **scripts/devices.js**: Individual device control modals with slider carousels
- **scripts/scenes.js**: Lighting scene definitions and application logic
- **scripts/controls.js**: TV remote controls (Fire TV/Roku) and rollershade controls
- **scripts/camera.js**: Camera modal with video stream management
- **scripts/lifx-themes.js**: LIFX Beam theme control via Home Assistant
- **statemanager/state-manager.js**: Centralized device state management
- **styles/main.css**: Comprehensive styling with bubble ring layouts and animations

### **INTEGRATION POINTS:**
- **Hubitat**: Maker API for device control and state queries
- **Home Assistant**: Fire TV control and LIFX Beam themes
- **WebSocket**: Real-time updates and camera notifications
- **Service Worker**: PWA support for offline capability

### **NOTABLE TECHNICAL DETAILS:**
- **Device IDs**: All device IDs are hardcoded constants (user preference)
- **API Configuration**: Uses localUrls.md for Hubitat API endpoints
- **State Management**: Debounced updates with visual state indicators
- **Modal Timeouts**: 30-second activity-based auto-close with comprehensive activity detection
- **Camera Priority**: Reolink camera notifications can interrupt any modal except camera modal
- **Touch Interface**: Optimized for touch with large targets and gesture controls

This dashboard provides a comprehensive smart home control interface with real-time state management, sophisticated lighting control, and seamless integration with multiple smart home platforms."
lobs:
alwaysApply: true
---
