<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Slider Carousel – Fixed Gradients + Relative Drag + Nav Buttons</title>
<style>
  :root{
    --b: 60; --s: 70; --h: 30; --k: 3500;
    --bg:#7a7a7a; --pill:#4b4b4b; --warm:#ffb163; --cool:#bcd6ff; --cream:#fff0cf; --text:#fff;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;overflow:hidden}

  /* Carousel */
  .carousel{display:flex;width:100vw;height:100vh;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
  .page{scroll-snap-align:start;flex:0 0 100vw;display:grid;grid-template-rows:1fr auto 1fr;justify-items:center;align-items:center;padding:22px 18px 28px}
  .label{font-weight:600;text-shadow:0 2px 2px rgba(0,0,0,.25)}
  .value{font-size:12px;opacity:.9}

  /* Slider visuals */
  .slider-wrap{position:relative;width:120px;height:320px;touch-action:none}
  .pill{position:absolute;inset:0;border-radius:60px;background:var(--pill);box-shadow:0 14px 28px rgba(0,0,0,.16),0 10px 10px rgba(0,0,0,.08);overflow:hidden}
  /* Full-height gradient; we reveal it with clip-path (no scaling) */
  .fill{position:absolute;inset:0;transition:clip-path .12s ease-out, background .12s ease-out}
  /* Real input is passive; we drive it via gestures */
  .v-range{position:absolute;inset:0;pointer-events:none;opacity:0}
  .gesture{position:absolute;inset:0;cursor:pointer}

  /* --- Fixed gradients + clip reveals --- */

  /* Brightness: black→cream fixed; reveal % from bottom */
  #brightness .fill{
    background:linear-gradient(to top, #000, var(--cream));
    clip-path: inset(calc(100% - (var(--b) * 1%)) 0 0 0);
  }

  /* Saturation: white at 0% → current hue at 100%; fixed gradient */
  #saturation .fill{
    background:linear-gradient(to bottom, hsl(var(--h) 100% 50%), white);
    clip-path: inset(calc(100% - (var(--s) * 1%)) 0 0 0);
  }

  /* Hue: rainbow strip; reveal proportionally to hue angle */
  #hue .fill{
    background:linear-gradient(to top,
      hsl(0 100% 50%),
      hsl(60 100% 50%),
      hsl(120 100% 40%),
      hsl(180 100% 45%),
      hsl(240 100% 60%),
      hsl(300 100% 55%),
      hsl(360 100% 50%)
    );
    /* reveal = h/360; use 100% - h%/3.6 to show bottom slice */
    clip-path: inset(calc(100% - (var(--h) * 1% / 3.6)) 0 0 0);
  }

  /* Kelvin: warm→cool fixed; reveal mapped to 2000–6500K */
  #kelvin .fill{
    background:linear-gradient(to top, var(--warm), var(--cool));
    /* reveal = (k-2000)/4500 */
    clip-path: inset(calc(100% - ((var(--k) - 2000) * 100% / 4500)) 0 0 0);
  }

  /* --- Nav buttons (fade on inactivity) --- */
  .nav-controls{position:fixed;inset:0;pointer-events:none}
  .nav-btn{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:999px;border:1px solid rgba(255,255,255,.3);background:rgba(0,0,0,.35);backdrop-filter:blur(6px);display:grid;place-items:center;font-size:20px;font-weight:700;user-select:none;opacity:0;transition:opacity .25s ease, background .2s ease, transform .08s ease;pointer-events:auto}
  .nav-btn:hover{background:rgba(0,0,0,.5)}
  .nav-btn:active{transform:translateY(-50%) scale(.97)}
  .nav-left{left:12px}
  .nav-right{right:12px}
  .nav-visible .nav-btn{opacity:1}
  .nav-btn[disabled]{opacity:.25;pointer-events:none}

</style>
</head>
<body>
  <div id="carousel" class="carousel">
    <!-- Brightness -->
    <section class="page">
      <div></div>
      <div class="slider-wrap" id="brightness">
        <div class="pill"><div class="fill"></div></div>
        <input id="input-brightness" class="v-range" type="range" min="0" max="100" value="60" />
        <div class="gesture" data-for="input-brightness"></div>
      </div>
      <div class="label">Brightness <span class="value" id="val-b">60%</span></div>
    </section>

    <!-- Saturation -->
    <section class="page">
      <div></div>
      <div class="slider-wrap" id="saturation">
        <div class="pill"><div class="fill"></div></div>
        <input id="input-saturation" class="v-range" type="range" min="0" max="100" value="70" />
        <div class="gesture" data-for="input-saturation"></div>
      </div>
      <div class="label">Saturation <span class="value" id="val-s">70%</span></div>
    </section>

    <!-- Hue -->
    <section class="page">
      <div></div>
      <div class="slider-wrap" id="hue">
        <div class="pill"><div class="fill"></div></div>
        <input id="input-hue" class="v-range" type="range" min="0" max="360" value="30" />
        <div class="gesture" data-for="input-hue"></div>
      </div>
      <div class="label">Hue <span class="value" id="val-h">30°</span></div>
    </section>

    <!-- Kelvin -->
    <section class="page">
      <div></div>
      <div class="slider-wrap" id="kelvin">
        <div class="pill"><div class="fill"></div></div>
        <input id="input-kelvin" class="v-range" type="range" min="2000" max="6500" value="3500" />
        <div class="gesture" data-for="input-kelvin"></div>
      </div>
      <div class="label">Temperature <span class="value" id="val-k">3500K</span></div>
    </section>
  </div>

  <!-- Nav buttons overlay -->
  <div id="nav" class="nav-controls">
    <button id="btn-prev" class="nav-btn nav-left" aria-label="Previous">&#x2039;</button>
    <button id="btn-next" class="nav-btn nav-right" aria-label="Next">&#x203A;</button>
  </div>

<script>
  /* ---------- state & linking ---------- */
  const state = { b:60, s:70, h:30, k:3500 };
  const K_MIN=2000, K_MAX=6500, H_MIN=35, H_MAX=220;
  const clamp=(v,min,max)=>Math.min(max,Math.max(min,v));
  const map=(v,a,b,c,d)=>((v-a)/(b-a))*(d-c)+c;
  const kelvinToHue=k=>clamp(map(k,K_MIN,K_MAX,H_MIN,H_MAX),0,360);
  const hueToKelvin=h=>Math.round(clamp(map(h,H_MIN,H_MAX,K_MIN,K_MAX),K_MIN,K_MAX));

  const root=document.documentElement;
  const $b=document.getElementById('input-brightness');
  const $s=document.getElementById('input-saturation');
  const $h=document.getElementById('input-hue');
  const $k=document.getElementById('input-kelvin');
  const $vb=document.getElementById('val-b');
  const $vs=document.getElementById('val-s');
  const $vh=document.getElementById('val-h');
  const $vk=document.getElementById('val-k');

  function render(){
    root.style.setProperty('--b', state.b);
    root.style.setProperty('--s', state.s);
    root.style.setProperty('--h', state.h);
    root.style.setProperty('--k', state.k);
    $b.value=state.b; $s.value=state.s; $h.value=state.h; $k.value=state.k;
    $vb.textContent=`${state.b}%`;
    $vs.textContent=`${state.s}%`;
    $vh.textContent=`${Math.round(state.h)}°`;
    $vk.textContent=`${state.k}K`;
  }

  // Setters (with linking)
  const setBrightness=v=>{ state.b=clamp(v,+$b.min,+$b.max); render(); };
  const setSaturation=v=>{ state.s=clamp(v,+$s.min,+$s.max); render(); };
  const setHue=v=>{ state.h=clamp(v,+$h.min,+$h.max); state.k=hueToKelvin(state.h); render(); };
  const setKelvin=v=>{ state.k=clamp(v,+$k.min,+$k.max); state.h=kelvinToHue(state.k); render(); };

  render();

  /* ---------- gesture behavior: relative drag + tap jump ---------- */
  function attachGesture(layer, input, onChange){
    const rect = ()=> layer.getBoundingClientRect();
    const valueRange = +input.max - +input.min;

    let startY=0, startX=0, startValue=+input.value;
    let moved=false, dragging=false;
    const ORIENT_EPS = 8; // px: decide vertical vs horizontal (let carousel scroll)

    layer.addEventListener('pointerdown', (e)=>{
      layer.setPointerCapture(e.pointerId);
      startY=e.clientY; startX=e.clientX;
      startValue=+input.value;
      moved=false; dragging=false;
    });

    layer.addEventListener('pointermove', (e)=>{
      if (!layer.hasPointerCapture(e.pointerId)) return;

      const dy = startY - e.clientY;
      const dx = Math.abs(e.clientX - startX);
      const ady = Math.abs(dy);

      if (!dragging && dx - ady > ORIENT_EPS) return;     // let horizontal swipe pass
      if (!dragging && ady > ORIENT_EPS) dragging = true;  // commit to vertical drag

      if (dragging){
        moved = true;
        const h = rect().height;
        const delta = (dy / h) * valueRange; // up increases
        onChange(startValue + delta);
        e.preventDefault();
      }
    });

    layer.addEventListener('pointerup', (e)=>{
      if (!moved){
        // tap: jump to absolute position based on pointer
        const r = rect();
        const percent = Math.min(1, Math.max(0, (r.bottom - e.clientY) / r.height));
        const v = +input.min + percent * valueRange;
        onChange(v);
      }
      layer.releasePointerCapture(e.pointerId);
      moved=false; dragging=false;
    });

    layer.addEventListener('pointercancel', ()=>{ moved=false; dragging=false; });
    layer.addEventListener('lostpointercapture', ()=>{ moved=false; dragging=false; });
  }

  attachGesture(document.querySelector('#brightness .gesture'), $b, setBrightness);
  attachGesture(document.querySelector('#saturation .gesture'), $s, setSaturation);
  attachGesture(document.querySelector('#hue .gesture'),        $h, setHue);
  attachGesture(document.querySelector('#kelvin .gesture'),     $k, setKelvin);

  /* ---------- Carousel nav buttons + inactivity fade ---------- */
  const carousel = document.getElementById('carousel');
  const nav = document.getElementById('nav');
  const btnPrev = document.getElementById('btn-prev');
  const btnNext = document.getElementById('btn-next');
  let hideTimer = null;

  function pageWidth(){ return carousel.clientWidth; }
  function pageCount(){ return carousel.children.length; }
  function currentIndex(){ return Math.round(carousel.scrollLeft / pageWidth()); }

  function goTo(index){
    const clamped = clamp(index, 0, pageCount()-1);
    carousel.scrollTo({ left: clamped * pageWidth(), behavior: 'smooth' });
    updateDisabled(clamped);
  }
  function updateDisabled(idx = currentIndex()){
    btnPrev.toggleAttribute('disabled', idx <= 0);
    btnNext.toggleAttribute('disabled', idx >= pageCount()-1);
  }

  btnPrev.addEventListener('click', ()=>{ showNav(); goTo(currentIndex()-1); });
  btnNext.addEventListener('click', ()=>{ showNav(); goTo(currentIndex()+1); });
  window.addEventListener('resize', ()=> updateDisabled());
  carousel.addEventListener('scroll', ()=> updateDisabled());

  // Visibility logic
  function showNav(){
    nav.classList.add('nav-visible');
    if (hideTimer) clearTimeout(hideTimer);
    hideTimer = setTimeout(()=> nav.classList.remove('nav-visible'), 2500);
  }

  // Consider these as "activity" to reset/show controls
  const activityEvents = ['pointerdown','pointerup','mousemove','wheel','touchstart','keydown','click'];
  activityEvents.forEach(ev => window.addEventListener(ev, showNav, {passive:true}));

  // Start visible, then fade after timeout
  showNav();
  updateDisabled();
</script>
</body>
</html>
